id: sample_greeting
specVersion: '0.1'
version: '1.0'
name: sample_greeting
start: start
input:
  name: "Juan"

functions:
  - name: greet
    operation: sys.greet
  - name: uppercase
    operation: sys.uppercase

states:
  - name: start
    type: event
    onEvents:
      - eventRefs: [start]
    transition: greet

  - name: greet
    type: operation
    actions:
      - functionRef:
          refName: greet
          arguments:
            name: "${input.name}"
    transition: transform

  - name: transform
    type: operation
    actions:
      - functionRef:
          refName: uppercase
          arguments:
            message: "${greet.result}"
    transition: log_result

  - name: log_result
    type: inject
    data:
      message: "Resultado final: ${transform.result}"
    transition: end

  - name: end
    type: event
    onEvents:
      - eventRefs: [end]
    end: true
  
